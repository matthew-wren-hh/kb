"use strict";!function(t,o,e){function n(t){var n=this,i=o.PointerEvent?{end:"pointerup",enter:"pointerenter",leave:"pointerleave"}:{end:"touchend",enter:"mouseenter",leave:"mouseleave"};this.container=document.querySelector(t),this.container.classList.add("no-dropdown-transition"),this.root=this.container.querySelector(".st-nav-menu"),this.dropdownBackground=this.container.querySelector(".st-dropdown-bg"),this.dropdownBackgroundAlt=this.container.querySelector(".st-alt-bg"),this.dropdownContainer=this.container.querySelector(".st-dropdown-container"),this.dropdownArrow=this.container.querySelector(".st-dropdown-arrow"),this.hasDropdownLinks=e.Util.queryArray(".st-has-dropdown",this.root),this.dropdownSections=e.Util.queryArray(".st-dropdown-section",this.container).map((function(t){return{el:t,name:t.getAttribute("data-dropdown"),content:t.querySelector(".st-dropdown-content"),width:t.querySelector(".st-dropdown-content").offsetWidth}})),this.hasDropdownLinks.forEach((function(t){t.addEventListener(i.enter,(function(o){"touch"!==o.pointerType&&(n.stopCloseTimeout(),n.openDropdown(t))})),t.addEventListener(i.leave,(function(t){"touch"!==t.pointerType&&n.startCloseTimeout()})),t.addEventListener(i.end,(function(o){o.preventDefault(),o.stopPropagation(),n.toggleDropdown(t)}))})),this.dropdownContainer.addEventListener(i.enter,(function(t){"touch"!==t.pointerType&&n.stopCloseTimeout()})),this.dropdownContainer.addEventListener(i.leave,(function(t){"touch"!==t.pointerType&&n.startCloseTimeout()})),this.dropdownContainer.addEventListener(i.end,(function(t){t.stopPropagation()})),document.body.addEventListener(i.end,(function(t){e.Util.touch.isDragging||n.closeDropdown()}))}function i(t){var o=this,n=e.Util.touch.isSupported?"touchend":"click";this.root=document.querySelector(t),this.activeClass="st-popup-active",this.link=this.root.querySelector(".st-root-link"),this.popup=this.root.querySelector(".st-popup"),this.closeButton=this.root.querySelector(".st-popup-close-button"),this.link.addEventListener(n,(function(t){t.stopPropagation(),o.togglePopup()})),this.popup.addEventListener(n,(function(t){t.stopPropagation()})),this.closeButton&&this.closeButton.addEventListener(n,(function(t){o.closeAllPopups()})),document.body.addEventListener(n,(function(t){e.Util.touch.isDragging||o.closeAllPopups()}),!1)}e.Util={queryArray:function(t,o){return o||(o=document.body),Array.prototype.slice.call(o.querySelectorAll(t))},touch:{isSupported:"ontouchstart"in o||navigator.maxTouchPoints,isDragging:!1}},n.prototype.openDropdown=function(t){var o=this;if(this.activeDropdown!==t){this.activeDropdown=t,this.container.classList.add("overlay-active"),this.container.classList.add("dropdown-active"),this.hasDropdownLinks.forEach((function(t){t.classList.remove("active")})),t.classList.add("active");var e=t.getAttribute("data-dropdown"),n="left",i={width:0,height:0,content:null};this.dropdownSections.forEach((function(t){t.el.classList.remove("active"),t.el.classList.remove("left"),t.el.classList.remove("right"),t.name===e?(t.el.classList.add("active"),n="right",i={width:t.content.offsetWidth,height:t.content.offsetHeight,content:t.content}):t.el.classList.add(n)}));var s=i.width/520,r=i.height/400,a=t.getBoundingClientRect(),c=a.left+a.width/2-i.width/2;c=Math.round(Math.max(c,10)),clearTimeout(this.disableTransitionTimeout),this.enableTransitionTimeout=setTimeout((function(){o.container.classList.remove("no-dropdown-transition")}),50),this.dropdownBackground.style.transform="translateX("+c+"px) scaleX("+s+") scaleY("+r+")",this.dropdownContainer.style.transform="translateX("+c+"px)",this.dropdownContainer.style.width=i.width+"px",this.dropdownContainer.style.height=i.height+"px";var d=Math.round(a.left+a.width/2);this.dropdownArrow.style.transform="translateX("+d+"px) rotate(45deg)";var l=i.content.children[0].offsetHeight/r;this.dropdownBackgroundAlt.style.transform="translateY("+l+"px)"}},n.prototype.closeDropdown=function(){var t=this;this.activeDropdown&&(this.hasDropdownLinks.forEach((function(t,o){t.classList.remove("active")})),clearTimeout(this.enableTransitionTimeout),this.disableTransitionTimeout=setTimeout((function(){t.container.classList.add("no-dropdown-transition")}),50),this.container.classList.remove("overlay-active"),this.container.classList.remove("dropdown-active"),this.activeDropdown=void 0)},n.prototype.toggleDropdown=function(t){this.activeDropdown===t?this.closeDropdown():this.openDropdown(t)},n.prototype.startCloseTimeout=function(){var t=this;t.closeDropdownTimeout=setTimeout((function(){t.closeDropdown()}),50)},n.prototype.stopCloseTimeout=function(){clearTimeout(this.closeDropdownTimeout)},i.prototype.togglePopup=function(){var t=this.root.classList.contains(this.activeClass);this.closeAllPopups(!0),t||this.root.classList.add(this.activeClass)},i.prototype.closeAllPopups=function(t){for(var o=document.getElementsByClassName(this.activeClass),e=0;e<o.length;e++)o[e].classList.remove(this.activeClass)},t((function(){new n(".st-nav"),new i(".st-nav .st-nav-section.st-nav-mobile")}))}(jQuery,this,{});